fix file 

made some more fixes

one more bug detected and fixed

fourth bug found and fixed

fifth bug found and fixed

another fix message for purple mode 